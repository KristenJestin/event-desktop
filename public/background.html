<!DOCTYPE html>
<html lang="fr">
<head>
    <script>

        
        window.onload = function () {
            const { ipcRenderer } = require('electron');
            import moment from 'moment'
            import localization from 'moment/locale/fr'
            moment.updateLocale('fr', localization)



            let events = {}

            // When initialisation start or when event added / updated / deleted
            ipcRenderer.on('events-send', (event, obj) => {
                if(obj === null)
                    obj = {}

                events = obj
                console.log(events)
            })


            let backgroundTask = setInterval(() => {

                let beforeEvents = events.filter(event => moment(event.start).isBeforeOrSame(moment(), 'day') && !event.notified)
                beforeEvents.forEach(event => {
                    if(moment(event.start).isAfterOrSame(moment().subtract(1, 'day'), 'day')){
                        /* TODO: Notifications
                        ** Resend to react they to notify user
                        ** OR
                        ** Launch notification direclty here (onclick go on event section)
                        */
                    }
                });

            }, 1000 * 10);

        };


    </script>
</head>

<body>
</body>

</html>